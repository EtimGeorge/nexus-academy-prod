import{_ as O,r as v,B as P,l as h,o as E,C as F,c as u,a as t,t as m,b as N,d as H,$ as B,s as g,v as i,E as a,j as V,a0 as w,F as M,f as T,a1 as $,z as W,i as d}from"./index-Ot6YnaKo.js";const z={class:"admin-page-container"},G={class:"page-header"},I={class:"page-title"},K={class:"header-actions"},J=["disabled"],Q={key:0,class:"page-loader-container"},X={key:1,class:"error-message"},Y={class:"form-section"},Z={class:"form-grid"},ee={class:"form-group"},te={class:"form-group"},se={class:"form-group full-width"},oe={class:"form-group"},le={class:"form-group"},ie={class:"form-group"},ne={class:"form-group"},ae={class:"form-group full-width"},re={class:"form-group full-width"},ue={class:"checkbox-label"},de={class:"form-section"},pe={class:"form-grid"},ve={class:"form-group full-width"},ce={class:"form-group"},me={class:"form-group"},ge={class:"form-section"},fe={class:"modules-container"},be={class:"module-header"},ye=["onClick"],Ue={class:"form-group"},Ce=["onUpdate:modelValue"],_e=["onUpdate:modelValue","placeholder"],Ve={class:"lesson-meta-grid"},xe={class:"form-group"},Le=["onUpdate:modelValue"],ke={class:"form-group"},he={class:"checkbox-label"},we=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Te=["onUpdate:modelValue"],Ae=["onClick"],Re=["onClick"],je={__name:"CourseEditorView",setup(qe){const A=P(),R=W(),y=v(A.params.id||null),U=v(!!y.value),s=v({title:"",slug:"",description:"",category:"",level:"",price:0,currency:"NGN",imageUrl:"",isFeatured:!1,targetAudience:"",prerequisites:[],learningObjectives:[],estimatedDuration:"",hasAIPlayground:!1,modules:[]}),C=v(U.value),f=v(!1),b=v(null),x=h({get:()=>(s.value.prerequisites||[]).join(`
`),set:l=>{s.value.prerequisites=l.split(`
`).map(e=>e.trim()).filter(e=>e)}}),L=h({get:()=>(s.value.learningObjectives||[]).join(`
`),set:l=>{s.value.learningObjectives=l.split(`
`).map(e=>e.trim()).filter(e=>e)}}),j=()=>{s.value.modules.push({title:"",lessons:[{title:"",textContentHTML:"",videoURL:""}]})},q=l=>{s.value.modules.splice(l,1)},S=l=>{s.value.modules[l].lessons.push({title:"",textContentHTML:"",videoURL:""})},D=(l,e)=>{s.value.modules[l].lessons.splice(e,1)},k=async()=>{f.value=!0;try{const{modules:l,...e}=s.value,_=l.flatMap((o,p)=>o.lessons.map((n,c)=>({...n,moduleId:o.title,order:p*100+c})));await $(y.value,e,_),alert("Course saved successfully!"),R.push("/admin/courses")}catch(l){console.error("Failed to save course:",l),alert("Error saving course. Please check the console for details.")}finally{f.value=!1}};return E(async()=>{if(U.value){C.value=!0;try{const l=await F(y.value);l?(l.prerequisites=l.prerequisites||[],l.learningObjectives=l.learningObjectives||[],l.modules=l.modules||[],s.value=l):b.value="Course not found."}catch(l){console.error("Failed to load course for editing:",l),b.value="Failed to load course data."}finally{C.value=!1}}}),(l,e)=>{const _=B("RouterLink");return d(),u("div",z,[t("div",G,[t("h1",I,m(U.value?"Edit Course":"Create New Course"),1),t("div",K,[N(_,{to:"/admin/courses",class:"btn btn-secondary"},{default:H(()=>e[12]||(e[12]=[V("Cancel",-1)])),_:1,__:[12]}),t("button",{onClick:k,class:"btn btn-primary",disabled:f.value},m(f.value?"Saving...":"Save & Publish"),9,J)])]),C.value?(d(),u("div",Q,e[13]||(e[13]=[t("div",{class:"spinner"},null,-1)]))):b.value?(d(),u("div",X,[t("p",null,m(b.value),1)])):(d(),u("form",{key:2,onSubmit:g(k,["prevent"]),class:"course-editor-form"},[t("div",Y,[e[23]||(e[23]=t("h2",{class:"section-title"},"Core Details",-1)),t("div",Z,[t("div",ee,[e[14]||(e[14]=t("label",{for:"title"},"Course Title",-1)),i(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.title=o),type:"text"},null,512),[[a,s.value.title]])]),t("div",te,[e[15]||(e[15]=t("label",{for:"slug"},"URL Slug",-1)),i(t("input",{id:"slug","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.slug=o),type:"text"},null,512),[[a,s.value.slug]])]),t("div",se,[e[16]||(e[16]=t("label",{for:"description"},"Short Description",-1)),i(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.description=o),rows:"3"},null,512),[[a,s.value.description]])]),t("div",oe,[e[17]||(e[17]=t("label",{for:"category"},"Category",-1)),i(t("input",{id:"category","onUpdate:modelValue":e[3]||(e[3]=o=>s.value.category=o),type:"text"},null,512),[[a,s.value.category]])]),t("div",le,[e[18]||(e[18]=t("label",{for:"level"},"Level",-1)),i(t("input",{id:"level","onUpdate:modelValue":e[4]||(e[4]=o=>s.value.level=o),type:"text"},null,512),[[a,s.value.level]])]),t("div",ie,[e[19]||(e[19]=t("label",{for:"price"},"Price (in Kobo/Cents)",-1)),i(t("input",{id:"price","onUpdate:modelValue":e[5]||(e[5]=o=>s.value.price=o),type:"number"},null,512),[[a,s.value.price,void 0,{number:!0}]])]),t("div",ne,[e[20]||(e[20]=t("label",{for:"currency"},"Currency",-1)),i(t("input",{id:"currency","onUpdate:modelValue":e[6]||(e[6]=o=>s.value.currency=o),type:"text"},null,512),[[a,s.value.currency]])]),t("div",ae,[e[21]||(e[21]=t("label",{for:"imageUrl"},"Thumbnail Image URL",-1)),i(t("input",{id:"imageUrl","onUpdate:modelValue":e[7]||(e[7]=o=>s.value.imageUrl=o),type:"text",placeholder:"https://images.pexels.com/..."},null,512),[[a,s.value.imageUrl]])]),t("div",re,[t("label",ue,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>s.value.isFeatured=o)},null,512),[[w,s.value.isFeatured]]),e[22]||(e[22]=V(" Mark as a Featured Course (will show on Home Page) ",-1))])])])]),t("div",de,[e[27]||(e[27]=t("h2",{class:"section-title"},"Enhanced Details (for Sales Page)",-1)),t("div",pe,[t("div",ve,[e[24]||(e[24]=t("label",{for:"targetAudience"},"Target Audience",-1)),i(t("textarea",{id:"targetAudience","onUpdate:modelValue":e[9]||(e[9]=o=>s.value.targetAudience=o),rows:"2",placeholder:"e.g., Marketers, copywriters, and entrepreneurs..."},null,512),[[a,s.value.targetAudience]])]),t("div",ce,[e[25]||(e[25]=t("label",{for:"prerequisites"},"Prerequisites (one per line)",-1)),i(t("textarea",{id:"prerequisites","onUpdate:modelValue":e[10]||(e[10]=o=>x.value=o),rows:"3",placeholder:"e.g., No prerequisites required"},null,512),[[a,x.value]])]),t("div",me,[e[26]||(e[26]=t("label",{for:"learningObjectives"},"Learning Objectives (one per line)",-1)),i(t("textarea",{id:"learningObjectives","onUpdate:modelValue":e[11]||(e[11]=o=>L.value=o),rows:"3",placeholder:"e.g., Build a multi-step AI agent"},null,512),[[a,L.value]])])])]),t("div",ge,[e[32]||(e[32]=t("h2",{class:"section-title"},"Curriculum",-1)),t("div",fe,[(d(!0),u(M,null,T(s.value.modules,(o,p)=>(d(),u("div",{key:p,class:"module-item"},[t("div",be,[t("h3",null,"Module "+m(p+1)+": "+m(o.title),1),t("button",{onClick:g(n=>q(p),["prevent"]),class:"btn-action btn-delete"}," Remove Module ",8,ye)]),t("div",Ue,[e[28]||(e[28]=t("label",null,"Module Title",-1)),i(t("input",{"onUpdate:modelValue":n=>o.title=n,type:"text"},null,8,Ce),[[a,o.title]])]),e[31]||(e[31]=t("h4",null,"Lessons",-1)),(d(!0),u(M,null,T(o.lessons,(n,c)=>(d(),u("div",{key:c,class:"lesson-item"},[i(t("input",{"onUpdate:modelValue":r=>n.title=r,type:"text",placeholder:`Lesson ${c+1} Title`},null,8,_e),[[a,n.title]]),t("div",Ve,[t("div",xe,[e[29]||(e[29]=t("label",null,"Estimated Duration",-1)),i(t("input",{"onUpdate:modelValue":r=>n.estimatedDuration=r,type:"text",placeholder:"e.g., 15 minutes"},null,8,Le),[[a,n.estimatedDuration]])]),t("div",ke,[t("label",he,[i(t("input",{type:"checkbox","onUpdate:modelValue":r=>n.hasPlayground=r},null,8,we),[[w,n.hasPlayground]]),e[30]||(e[30]=V(" Has AI Playground? ",-1))])])]),i(t("textarea",{"onUpdate:modelValue":r=>n.textContentHTML=r,rows:"4",placeholder:"Lesson content (HTML is supported)"},null,8,Me),[[a,n.textContentHTML]]),i(t("input",{"onUpdate:modelValue":r=>n.videoURL=r,type:"text",placeholder:"Secure Video URL (Vimeo/Wistia)"},null,8,Te),[[a,n.videoURL]]),t("button",{onClick:g(r=>D(p,c),["prevent"]),class:"btn-action btn-delete"}," Remove Lesson ",8,Ae)]))),128)),t("button",{onClick:g(n=>S(p),["prevent"]),class:"btn btn-secondary"}," Add Lesson to Module ",8,Re)]))),128))]),t("button",{onClick:g(j,["prevent"]),class:"btn btn-primary"}," Add New Module ")])],32))])}}},De=O(je,[["__scopeId","data-v-fa220672"]]);export{De as default};
