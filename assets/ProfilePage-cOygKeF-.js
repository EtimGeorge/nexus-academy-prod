import{_ as T,r,y as _,P as W,l as b,o as D,Q as G,w as K,c as n,a,t as c,v as u,E as m,x as C,F as P,f as A,s as M,e as O,i,S as j,T as q}from"./index-DuVCQ5_p.js";const H=async(d,o)=>{console.log(`Simulating upload for user: ${d} with file:`,o.name),await new Promise(v=>setTimeout(v,1500));const p="https://images.pexels.com/photos/1704488/pexels-photo-1704488.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1";return console.log(`Simulation complete. Returning placeholder URL: ${p}`),p},w=[{name:"Nigeria",code:"NG",phone:"234",states:["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara","FCT"]},{name:"United States",code:"US",phone:"1",states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]},{name:"Canada",code:"CA",phone:"1",states:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan"]},{name:"United Kingdom",code:"GB",phone:"44",states:["England","Scotland","Wales","Northern Ireland"]},{name:"Ghana",code:"GH",phone:"233",states:["Ashanti","Brong-Ahafo","Central","Eastern","Greater Accra","Northern","Upper East","Upper West","Volta","Western"]},{name:"South Africa",code:"ZA",phone:"27",states:["Eastern Cape","Free State","Gauteng","KwaZulu-Natal","Limpopo","Mpumalanga","North West","Northern Cape","Western Cape"]}];function J(){return w.sort((d,o)=>d.name.localeCompare(o.name))}function Z(d){const o=w.find(p=>p.name===d);return o?o.states.sort():[]}function $(d){return w.find(o=>o.name===d)}const Q={class:"profile-page-content"},Y={key:0,class:"profile-card"},z={class:"form-group avatar-group"},X={class:"avatar-uploader"},ee={class:"avatar-preview"},ae=["src"],te={key:1},se={class:"form-row"},oe={class:"form-group"},le={class:"form-group"},ne={class:"form-group"},ie={class:"form-row"},re={class:"form-group"},ue=["value"],de={class:"form-group"},pe=["placeholder"],me={class:"form-group"},ve={class:"form-row"},fe={class:"form-group"},ce=["value"],ye={class:"form-group"},ge={id:"state-input-container"},Ne=["value"],he={class:"form-group"},be={class:"form-actions"},we=["disabled"],Se={key:0,class:"success-message"},Ue={key:1,class:"page-loader-container"},ke={__name:"ProfilePage",setup(d){const o=r(_.currentUser),p=r(!0),v=r(!1),h=r(!1),y=r(""),S=r(null),f=r(null),t=W({firstName:"",lastName:"",displayName:"",whatsappNumber:"",address1:"",country:"",state:"",city:""}),U=r([]),g=r([]),N=r(!1),L=b(()=>(o.value?.displayName||o.value?.email||"NS").split(" ").map(l=>l[0]).join("").substring(0,2).toUpperCase()),x=b(()=>`+${$(t.country)?.phone||"1"} ...`),E=b(()=>N.value?"Select from List":"Enter Manually"),k=b(()=>f.value?URL.createObjectURL(f.value):o.value?.photoURL),I=()=>{h.value=!0},V=()=>{S.value.click()},B=()=>{N.value=!N.value},R=l=>{const e=l.target.files[0];e&&e.type.startsWith("image/")&&(f.value=e,h.value=!0)},F=async()=>{v.value=!0,y.value="";try{let l=o.value.photoURL;f.value&&(l=await H(o.value.uid,f.value)),await j({displayName:t.displayName,photoURL:l}),await q(o.value.uid,{...t,photoURL:l}),y.value="Profile saved successfully!",h.value=!1,f.value=null,setTimeout(()=>{y.value=""},3e3)}catch(l){console.error("Error saving profile:",l),alert("Failed to save profile. Please check the console for details.")}finally{v.value=!1}};return D(async()=>{if(U.value=J(),o.value){const l=await G(o.value.uid);l&&Object.assign(t,l),t.displayName=o.value.displayName||t.displayName}p.value=!1}),K(()=>t.country,l=>{g.value=Z(l),N.value=g.value.length===0,g.value.includes(t.state)||(t.state="")}),(l,e)=>(i(),n("div",Q,[e[28]||(e[28]=a("header",{class:"profile-header"},[a("h1",null,"My Profile"),a("p",null," This information will be used for your certificates and communication. ")],-1)),p.value?(i(),n("div",Ue,e[27]||(e[27]=[a("div",{class:"spinner"},null,-1)]))):(i(),n("div",Y,[a("form",{onInput:I,onSubmit:M(F,["prevent"])},[a("div",z,[e[10]||(e[10]=a("label",null,"Profile Picture",-1)),a("div",X,[a("div",ee,[k.value?(i(),n("img",{key:0,src:k.value,alt:"Profile Avatar"},null,8,ae)):(i(),n("span",te,c(L.value),1))]),a("input",{type:"file",ref_key:"fileInput",ref:S,onChange:R,accept:"image/png, image/jpeg",style:{display:"none"}},null,544),a("button",{type:"button",onClick:V,class:"btn btn-secondary"}," Change Avatar "),e[9]||(e[9]=a("small",null,"Recommended: Square image, PNG or JPG.",-1))])]),e[24]||(e[24]=a("hr",{class:"form-divider"},null,-1)),a("div",se,[a("div",oe,[e[11]||(e[11]=a("label",{for:"firstName"},"First Name",-1)),u(a("input",{type:"text",id:"firstName","onUpdate:modelValue":e[0]||(e[0]=s=>t.firstName=s),required:""},null,512),[[m,t.firstName]])]),a("div",le,[e[12]||(e[12]=a("label",{for:"lastName"},"Last Name",-1)),u(a("input",{type:"text",id:"lastName","onUpdate:modelValue":e[1]||(e[1]=s=>t.lastName=s),required:""},null,512),[[m,t.lastName]])])]),a("div",ne,[e[13]||(e[13]=a("label",{for:"displayName"},"Display Name (Public)",-1)),u(a("input",{type:"text",id:"displayName","onUpdate:modelValue":e[2]||(e[2]=s=>t.displayName=s)},null,512),[[m,t.displayName]]),e[14]||(e[14]=a("small",null,"This name will be shown in comments and discussions.",-1))]),e[25]||(e[25]=a("hr",{class:"form-divider"},null,-1)),a("div",ie,[a("div",re,[e[15]||(e[15]=a("label",{for:"email"},"Email Address",-1)),a("input",{type:"email",id:"email",value:o.value?.email,readonly:"",disabled:""},null,8,ue),e[16]||(e[16]=a("small",null,"Email cannot be changed.",-1))]),a("div",de,[e[17]||(e[17]=a("label",{for:"whatsapp"},"WhatsApp Number",-1)),u(a("input",{type:"tel",id:"whatsapp","onUpdate:modelValue":e[3]||(e[3]=s=>t.whatsappNumber=s),placeholder:x.value},null,8,pe),[[m,t.whatsappNumber]])])]),e[26]||(e[26]=a("hr",{class:"form-divider"},null,-1)),a("div",me,[e[18]||(e[18]=a("label",{for:"address1"},"Address Line 1",-1)),u(a("input",{type:"text",id:"address1","onUpdate:modelValue":e[4]||(e[4]=s=>t.address1=s)},null,512),[[m,t.address1]])]),a("div",ve,[a("div",fe,[e[20]||(e[20]=a("label",{for:"country"},"Country",-1)),u(a("select",{id:"country","onUpdate:modelValue":e[5]||(e[5]=s=>t.country=s),required:""},[e[19]||(e[19]=a("option",{value:""},"Select a Country",-1)),(i(!0),n(P,null,A(U.value,s=>(i(),n("option",{key:s.code,value:s.name},c(s.name),9,ce))),128))],512),[[C,t.country]])]),a("div",ye,[e[22]||(e[22]=a("label",{for:"state"},"State / Province",-1)),a("div",ge,[g.value.length>0&&!N.value?u((i(),n("select",{key:0,id:"state-select","onUpdate:modelValue":e[6]||(e[6]=s=>t.state=s)},[e[21]||(e[21]=a("option",{value:""},"Select a State",-1)),(i(!0),n(P,null,A(g.value,s=>(i(),n("option",{key:s,value:s},c(s),9,Ne))),128))],512)),[[C,t.state]]):u((i(),n("input",{key:1,type:"text",id:"state-manual","onUpdate:modelValue":e[7]||(e[7]=s=>t.state=s),placeholder:"Enter your state/province"},null,512)),[[m,t.state]])]),a("a",{href:"#",onClick:M(B,["prevent"]),class:"manual-input-toggle"},c(E.value),1)])]),a("div",he,[e[23]||(e[23]=a("label",{for:"city"},"City",-1)),u(a("input",{type:"text",id:"city","onUpdate:modelValue":e[8]||(e[8]=s=>t.city=s)},null,512),[[m,t.city]])]),a("div",be,[a("button",{type:"submit",class:"btn btn-primary",disabled:!h.value||v.value},c(v.value?"Saving...":"Save Changes"),9,we),y.value?(i(),n("p",Se,c(y.value),1)):O("",!0)])],32)]))]))}},Pe=T(ke,[["__scopeId","data-v-c667fcec"]]);export{Pe as default};
