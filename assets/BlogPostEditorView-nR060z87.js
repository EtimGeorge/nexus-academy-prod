import{_ as x,r as a,B as P,l as U,o as B,G as A,c as p,a as t,t as m,b as S,d as V,$ as w,s as F,v as n,E as i,j as _,a0 as C,a2 as D,a3 as E,z as M,i as v}from"./index-Ot6YnaKo.js";const L={class:"admin-page-container"},T={class:"page-header"},I={class:"page-title"},R={class:"header-actions"},N=["disabled"],$={key:0,class:"page-loader-container"},H={key:1,class:"error-message"},j={class:"form-section"},z={class:"form-grid"},G={class:"form-group"},O={class:"form-group"},Y={class:"form-group"},q={class:"form-group"},J={class:"form-group"},K={class:"form-group"},Q={class:"checkbox-label"},W={__name:"BlogPostEditorView",setup(X){const h=P(),k=M(),c=a(h.params.id||null),r=a(!!c.value),f=a(r.value),d=a(!1),u=a(null),s=a({title:"",category:"",imageUrl:"",content:"",isFeatured:!1,publishedAt:null}),b=U({get(){if(!s.value.publishedAt||!s.value.publishedAt.toDate)return"";const o=s.value.publishedAt.toDate(),e=o.getFullYear(),g=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");return`${e}-${g}-${l}`},set(o){o?s.value.publishedAt=new Date(o):s.value.publishedAt=null}}),y=async()=>{d.value=!0;try{const o={...s.value};o.publishedAt instanceof Date||r.value||(o.publishedAt=D()),await E(c.value,o),alert("Blog post saved successfully!"),k.push("/admin/blog")}catch(o){console.error("Failed to save blog post:",o),alert("Error saving post. Please check the console.")}finally{d.value=!1}};return B(async()=>{if(r.value)try{const o=await A(c.value);o?s.value=o:u.value="Blog post not found."}catch(o){console.error("Failed to load blog post for editing:",o),u.value="Failed to load post data."}finally{f.value=!1}}),(o,e)=>{const g=w("RouterLink");return v(),p("div",L,[t("div",T,[t("h1",I,m(r.value?"Edit Blog Post":"Create New Post"),1),t("div",R,[S(g,{to:"/admin/blog",class:"btn btn-secondary"},{default:V(()=>e[6]||(e[6]=[_("Cancel",-1)])),_:1,__:[6]}),t("button",{onClick:y,class:"btn btn-primary",disabled:d.value},m(d.value?"Saving...":"Save & Publish"),9,N)])]),f.value?(v(),p("div",$,e[7]||(e[7]=[t("div",{class:"spinner"},null,-1)]))):u.value?(v(),p("div",H,[t("p",null,m(u.value),1)])):(v(),p("form",{key:2,onSubmit:F(y,["prevent"]),class:"post-editor-form"},[t("div",j,[t("div",z,[t("div",G,[e[8]||(e[8]=t("label",{for:"title"},"Post Title",-1)),n(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l),type:"text"},null,512),[[i,s.value.title]])]),t("div",O,[e[9]||(e[9]=t("label",{for:"category"},"Category",-1)),n(t("input",{id:"category","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.category=l),type:"text"},null,512),[[i,s.value.category]])]),t("div",Y,[e[10]||(e[10]=t("label",{for:"publishedAt"},"Published Date",-1)),n(t("input",{id:"publishedAt","onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),type:"date"},null,512),[[i,b.value]]),e[11]||(e[11]=t("small",null,"Leave blank to set to the current date on creation.",-1))]),t("div",q,[e[12]||(e[12]=t("label",{for:"imageUrl"},"Header Image URL",-1)),n(t("input",{id:"imageUrl","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.imageUrl=l),type:"text"},null,512),[[i,s.value.imageUrl]])])]),t("div",J,[e[13]||(e[13]=t("label",{for:"content"},"Content (HTML is supported)",-1)),n(t("textarea",{id:"content","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.content=l),rows:"15"},null,512),[[i,s.value.content]])]),t("div",K,[t("label",Q,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.isFeatured=l)},null,512),[[C,s.value.isFeatured]]),e[14]||(e[14]=_(" Mark as Featured Post ",-1))])])])],32))])}}},ee=x(W,[["__scopeId","data-v-93346c57"]]);export{ee as default};
