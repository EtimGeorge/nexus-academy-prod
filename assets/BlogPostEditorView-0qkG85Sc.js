import{_ as k,f as a,s as x,o as w,$ as P,c as d,a as t,t as g,b as U,w as B,X as M,j as T,k as r,y as u,e as b,a0 as V,a1 as L,m as C,d as p}from"./index-IR6LO8EE.js";const S={class:"admin-page-container"},F={class:"page-header"},H={class:"page-title"},E={class:"header-actions"},I=["disabled"],R={key:0,class:"page-loader-container"},N={key:1,class:"error-message"},D={class:"form-section"},j={class:"form-group"},A={class:"form-group"},O={class:"form-group"},X={class:"form-group"},$={class:"form-group"},q={class:"checkbox-label"},z={__name:"BlogPostEditorView",setup(G){const y=x(),_=C(),c=a(y.params.id||null),v=a(!!c.value),m=a(v.value),i=a(!1),n=a(null),o=a({title:"",category:"",imageUrl:"",contentHTML:"",isFeatured:!1}),f=async()=>{if(!o.value.title){alert("Please enter a title for the blog post.");return}i.value=!0;try{await L(c.value,o.value),alert("Blog post saved successfully!"),_.push("/admin/blog")}catch(l){console.error("Failed to save blog post:",l),alert("Error saving blog post. Please check the console for details.")}finally{i.value=!1}};return w(async()=>{if(v.value)try{const l=await P(c.value);l?o.value=l:n.value="Blog post not found."}catch(l){console.error("Failed to load blog post for editing:",l),n.value="Failed to load post data."}finally{m.value=!1}}),(l,e)=>{const h=M("RouterLink");return p(),d("div",S,[t("div",F,[t("h1",H,g(v.value?"Edit Blog Post":"Create New Post"),1),t("div",E,[U(h,{to:"/admin/blog",class:"btn btn-secondary"},{default:B(()=>e[5]||(e[5]=[b("Cancel",-1)])),_:1,__:[5]}),t("button",{onClick:f,class:"btn btn-primary",disabled:i.value},g(i.value?"Saving...":"Save & Publish"),9,I)])]),m.value?(p(),d("div",R,e[6]||(e[6]=[t("div",{class:"spinner"},null,-1)]))):n.value?(p(),d("div",N,[t("p",null,g(n.value),1)])):(p(),d("form",{key:2,onSubmit:T(f,["prevent"]),class:"post-editor-form"},[t("div",D,[t("div",j,[e[7]||(e[7]=t("label",{for:"title"},"Post Title",-1)),r(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.title=s),type:"text",placeholder:"e.g., The Ultimate AI Video Showdown"},null,512),[[u,o.value.title]])]),t("div",A,[e[8]||(e[8]=t("label",{for:"category"},"Category",-1)),r(t("input",{id:"category","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.category=s),type:"text",placeholder:"e.g., Tool Spotlight"},null,512),[[u,o.value.category]])]),t("div",O,[e[9]||(e[9]=t("label",{for:"imageUrl"},"Header Image URL",-1)),r(t("input",{id:"imageUrl","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.imageUrl=s),type:"text",placeholder:"https://images.pexels.com/..."},null,512),[[u,o.value.imageUrl]])]),t("div",X,[e[10]||(e[10]=t("label",{for:"contentHTML"},"Content (HTML is supported)",-1)),r(t("textarea",{id:"contentHTML","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.contentHTML=s),rows:"15",placeholder:"<h2>Introduction</h2><p>Start writing your article here...</p>"},null,512),[[u,o.value.contentHTML]])]),t("div",$,[t("label",q,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.isFeatured=s)},null,512),[[V,o.value.isFeatured]]),e[11]||(e[11]=b(" Mark as Featured Post ",-1))])])])],32))])}}},K=k(z,[["__scopeId","data-v-91217b18"]]);export{K as default};
