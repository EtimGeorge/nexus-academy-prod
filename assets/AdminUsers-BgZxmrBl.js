import{_ as p,r as c,l as y,y as f,o as v,c as s,a as e,F as b,f as k,a6 as A,i as o,t as n,q as U,a7 as w}from"./index-Ot6YnaKo.js";const D={class:"admin-page-container"},N={key:0,class:"page-loader-container"},$={key:1,class:"error-message"},C={key:2,class:"users-table-container"},F={class:"users-table"},M={"data-label":"Display Name"},R={"data-label":"Email"},S={"data-label":"Role"},x={"data-label":"Joined On"},B={"data-label":"Actions",class:"actions-cell"},E=["onClick","disabled","title"],L={key:3,class:"no-data-message"},J={__name:"AdminUsers",setup(O){const r=c([]),i=c(!0),d=c(null),u=y(()=>f.currentUser),m=async()=>{try{i.value=!0,d.value=null,r.value=await A()}catch(a){console.error("Failed to fetch users:",a),d.value=a}finally{i.value=!1}},g=async a=>{const t=a.role==="admin"?"student":"admin",l=`Are you sure you want to change the role for "${a.email}" to "${t}"?`;if(confirm(l))try{await w(a.id,t),alert(`User role for "${a.email}" successfully updated to "${t}".`),m()}catch(h){console.error("Failed to update user role:",h),alert("There was an error updating the user role. Please check the console.")}},_=a=>!a||!a.toDate?"N/A":a.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return v(m),(a,t)=>(o(),s("div",D,[t[4]||(t[4]=e("div",{class:"page-header"},[e("h1",{class:"page-title"},"Manage Users"),e("p",{class:"page-subtitle"}," View user information and manage platform roles. ")],-1)),i.value?(o(),s("div",N,t[0]||(t[0]=[e("div",{class:"spinner"},null,-1)]))):d.value?(o(),s("div",$,t[1]||(t[1]=[e("p",null,"Failed to load users. Please try again later.",-1)]))):r.value.length>0?(o(),s("div",C,[e("table",F,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Role"),e("th",null,"Joined On"),e("th",null,"Actions")])],-1)),e("tbody",null,[(o(!0),s(b,null,k(r.value,l=>(o(),s("tr",{key:l.id},[e("td",M,n(l.displayName||"N/A"),1),e("td",R,n(l.email),1),e("td",S,[e("span",{class:U(["role-badge",`role-${l.role||"student"}`])},n(l.role||"student"),3)]),e("td",x,n(_(l.createdAt)),1),e("td",B,[e("button",{onClick:h=>g(l),disabled:l.id===u.value?.uid,class:"btn-action btn-role-toggle",title:l.id===u.value?.uid?"Cannot change your own role":"Toggle admin role"},n(l.role==="admin"?"Make Student":"Make Admin"),9,E)])]))),128))])])])):(o(),s("div",L,t[3]||(t[3]=[e("p",null,"No users found in the database.",-1)])))]))}},T=p(J,[["__scopeId","data-v-368b1fec"]]);export{T as default};
