import{_ as p,f as u,o as C,c as l,a as e,b as _,w as y,u as f,R as b,F as h,r as N,T as k,d as o,e as v,t as n,U as w}from"./index-IR6LO8EE.js";const A={class:"admin-page-container"},F={class:"page-header"},x={key:0,class:"page-loader-container"},L={key:1,class:"error-message"},P={key:2,class:"courses-table-container"},T={class:"courses-table"},$={"data-label":"Title"},B={"data-label":"Category"},D={"data-label":"Level"},E={"data-label":"Price"},V={"data-label":"Actions",class:"actions-cell"},G=["onClick"],I={key:3,class:"no-data-message"},M={__name:"AdminCourses",setup(R){const r=u([]),d=u(!0),i=u(null),c=async()=>{try{d.value=!0,i.value=null,r.value=await k()}catch(a){console.error("Failed to fetch courses:",a),i.value=a}finally{d.value=!1}},m=async(a,t)=>{if(confirm(`Are you sure you want to delete "${t}"? This will delete all associated lessons and cannot be undone.`))try{await w(a),alert(`Course "${t}" has been deleted successfully.`),c()}catch(s){console.error("Failed to delete course:",s),alert("Error deleting course. See console for details.")}},g=(a,t="NGN")=>typeof a!="number"?"N/A":new Intl.NumberFormat("en-NG",{style:"currency",currency:t}).format(a/100);return C(c),(a,t)=>(o(),l("div",A,[e("div",F,[t[1]||(t[1]=e("h1",{class:"page-title"},"Manage Courses",-1)),_(f(b),{to:"/admin/courses/new",class:"btn btn-primary"},{default:y(()=>t[0]||(t[0]=[v("Create New Course",-1)])),_:1,__:[0]})]),d.value?(o(),l("div",x,t[2]||(t[2]=[e("div",{class:"spinner"},null,-1)]))):i.value?(o(),l("div",L,t[3]||(t[3]=[e("p",null,"Failed to load courses. Please try again later.",-1)]))):r.value.length>0?(o(),l("div",P,[e("table",T,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Level"),e("th",null,"Price"),e("th",null,"Actions")])],-1)),e("tbody",null,[(o(!0),l(h,null,N(r.value,s=>(o(),l("tr",{key:s.id},[e("td",$,n(s.title),1),e("td",B,n(s.category||"N/A"),1),e("td",D,n(s.level||"N/A"),1),e("td",E,n(g(s.price,s.currency)),1),e("td",V,[_(f(b),{to:`/admin/courses/edit/${s.id}`,class:"btn-action btn-edit"},{default:y(()=>t[4]||(t[4]=[v("Edit",-1)])),_:2,__:[4]},1032,["to"]),e("button",{onClick:S=>m(s.id,s.title),class:"btn-action btn-delete"}," Delete ",8,G)])]))),128))])])])):(o(),l("div",I,t[6]||(t[6]=[e("p",null,'No courses found. Click "Create New Course" to get started.',-1)])))]))}},j=p(M,[["__scopeId","data-v-08302c16"]]);export{j as default};
