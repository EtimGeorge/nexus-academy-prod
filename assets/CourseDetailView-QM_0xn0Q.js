import{_ as $,r as c,l as V,w as F,c as l,i as o,a as e,e as C,s as N,v as D,x as T,F as B,f as A,t as u,u as I,j as h,y as _,z as M,A as R,n as H,B as W,o as U,C as j,k as Y,b as O,d as Q,R as G}from"./index-DuVCQ5_p.js";const x={btc:{name:"Bitcoin (BTC)",symbol:"BTC",networks:[{name:"Bitcoin Network",value:"bitcoin",address:"bc1qtuhgz4ays8w5l3z3ynj7lk7e5qumn5hv5ga6n5"},{name:"BRC20",value:"brc20",address:"1N6hXVAkAhouaFv6eLvvdSg6pDfH8YAfBk"},{name:"BNB Smart Chain (BEP20)",value:"bnb smart chain",address:"0x73aB257AbD916beCd67a062eD973211335635cb1"}]},eth:{name:"Ethereum (ETH)",symbol:"ETH",networks:[{name:"ERC20",value:"erc20",address:"0xAbc123Def456Ghi789Jkl012Mno345Pqr678Stu901"}]},usdt:{name:"Tether (USDT)",symbol:"USDT",networks:[{name:"ERC20",value:"erc20",address:"0x306381B58Ea94dA4D515E93b3663dE66355Ec943"},{name:"TRC20",value:"trc20",address:"TLWojaboTmaP2m42X7BU7czC6x8bsBwNFR"},{name:"BEP20 (BSC)",value:"bep20",address:"0x73aB257AbD916beCd67a062eD973211335635cb1"}]},bnb:{name:"Binance Coin (BNB)",symbol:"BNB",networks:[{name:"BEP20 (BSC)",value:"bep20",address:"0x306381B58Ea94dA4D515E93b3663dE66355Ec943"}]},sol:{name:"Solana (SOL)",symbol:"SOL",networks:[{name:"Solana",value:"solana",address:"ANSqJCWayckF6bEod2Y74w9WnKj6Nszz6yqFW3Brz4zC"}]},ada:{name:"Cardano (ADA)",symbol:"ADA",networks:[{name:"Cardano",value:"cardano",address:"addr1q99qj445fhv70rlxj6eaw6ld4e74hea92m8v3dapa88znp9wf3hlenhktwe5yflhum9dy47n0hldm078s45pcxxptzpsh0tntm"}]},xrp:{name:"Ripple (XRP)",symbol:"XRP",networks:[{name:"XRP",value:"xrp",address:"rHcFoo6a9qT5NHiVn1THQRhsEGcxtYCV4d",destinationTagRequired:!0,tag:"340798187"}]},pi:{name:"Pi Network (PI)",symbol:"PI",networks:[{name:"PI Network",value:"pi",address:"MBC6NRTTQLRCABQHIR5J4R4YDJWFWRAO4ZRQIM2SVI5GSIZ2HZ42QAAAAAABIUBK5PH24"}]},ice:{name:"Ice Network (ICE)",symbol:"ICE",networks:[{name:"BNB Smart Chain (BEP20)",value:"bnb smart chain",address:"0x73aB257AbD916beCd67a062eD973211335635cb1"}]}},X={class:"modal-content"},J={key:0},Z={key:1,class:"crypto-details-view"},K={class:"form-group"},ee=["value"],te={key:0,class:"form-group"},se=["value"],oe={class:"form-group"},le=["value"],ne={key:0,class:"card wallet-card"},ae={id:"wallet-coin-name"},re={class:"wallet-address-group"},ue=["value"],ie={class:"wallet-address-group"},de=["value"],ce={key:0,class:"wallet-address-group"},me=["value"],ve={class:"wallet-warning"},pe={id:"wallet-coin-symbol"},ye={__name:"PaymentModal",props:{course:{type:Object,required:!0}},emits:["close"],setup(S,{emit:E}){const f=S,P=E,n=M(),p=c(!1),k=c("Copy"),y=c(null),b=c("usdt"),w=c(""),d=c(null),a=V(()=>{const i=x[b.value];return i?i.networks:[]});function s(){P("close"),p.value=!1,b.value="usdt",w.value="",d.value=null}function m(){alert("Paystack payment is currently disabled for development. Please use 'Simulated Enrollment'.")}async function g(){const i=_.currentUser;if(!i||!f.course){alert("Authentication error. Please re-login."),n.push("/login");return}try{await R(i.uid,f.course.id,f.course.title,"simulated"),alert("Simulated enrollment successful! You now have access to the course."),n.push("/dashboard"),s()}catch(t){console.error("Simulated enrollment failed:",t),alert("An error occurred during simulated enrollment.")}}function q(){p.value=!0,w.value=a.value[0]?.value||""}async function z(){const i=x[b.value],t=i.networks.find(v=>v.value===w.value);if(!i||!t){alert("Please select a valid cryptocurrency and network.");return}d.value={name:i.name,symbol:i.symbol,address:t.address,networkName:t.name,destinationTagRequired:t.destinationTagRequired||!1,tag:t.tag||""},await H();const r=document.getElementById("wallet-qr-code");r&&(r.innerHTML="",new window.QRCode(r,{text:t.address+(t.destinationTagRequired&&t.tag?`?dt=${t.tag}`:""),width:150,height:150}));try{const v=_.currentUser;if(!v){alert("Authentication error. Please re-login to initiate crypto payment."),n.push("/login"),s();return}await R(v.uid,f.course.id,f.course.title,"crypto")}catch(v){console.error("Failed to create pending crypto enrollment:",v),alert("Could not record crypto payment initiation. Please try again.")}}function L(){y.value&&(y.value.select(),navigator.clipboard.writeText(y.value.value),k.value="Copied!",setTimeout(()=>{k.value="Copy"},2e3))}return F(b,i=>{const t=x[i]?.networks||[];w.value=t[0]?.value||""}),(i,t)=>(o(),l("div",{class:"modal-overlay",onClick:N(s,["self"])},[e("div",X,[e("button",{onClick:s,class:"close-modal-btn","aria-label":"Close payment options"}," × "),p.value?(o(),l("div",Z,[e("a",{href:"#",onClick:t[0]||(t[0]=N(r=>p.value=!1,["prevent"])),class:"back-link"},"← Back to options"),t[21]||(t[21]=e("h2",null,"Pay with Crypto",-1)),t[22]||(t[22]=e("p",{class:"page-description"}," Select your preferred cryptocurrency and network. Your access will be granted after manual confirmation by our team. ",-1)),e("form",{onSubmit:N(z,["prevent"])},[e("div",K,[t[7]||(t[7]=e("label",{for:"crypto-method"},"Cryptocurrency",-1)),D(e("select",{id:"crypto-method","onUpdate:modelValue":t[1]||(t[1]=r=>b.value=r),class:"form-control"},[(o(!0),l(B,null,A(I(x),(r,v)=>(o(),l("option",{key:v,value:v},u(r.name),9,ee))),128))],512),[[T,b.value]])]),a.value.length>0?(o(),l("div",te,[t[8]||(t[8]=e("label",{for:"crypto-network"},"Network",-1)),D(e("select",{id:"crypto-network","onUpdate:modelValue":t[2]||(t[2]=r=>w.value=r),class:"form-control"},[(o(!0),l(B,null,A(a.value,r=>(o(),l("option",{key:r.value,value:r.value},u(r.name),9,se))),128))],512),[[T,w.value]])])):C("",!0),e("div",oe,[t[9]||(t[9]=e("label",{for:"crypto-amount"},"Amount (USD equivalent)",-1)),e("input",{type:"text",id:"crypto-amount",value:`$${S.course.price.toFixed(2)}`,readonly:"",class:"form-control"},null,8,le)]),t[10]||(t[10]=e("button",{type:"submit",class:"btn btn-primary form-submit-btn"}," Generate Address ",-1))],32),d.value?(o(),l("div",ne,[t[18]||(t[18]=e("h4",null,"Make Your Deposit",-1)),e("p",null,[t[11]||(t[11]=h(" Scan the QR code or copy the address below to send ",-1)),e("strong",ae,u(d.value.name),1),t[12]||(t[12]=h(". ",-1))]),t[19]||(t[19]=e("div",{id:"wallet-qr-code",class:"qr-code-container"},null,-1)),e("div",re,[t[13]||(t[13]=e("label",null,"Wallet Address",-1)),e("input",{type:"text",value:d.value.address,readonly:"",ref_key:"walletAddressInput",ref:y},null,8,ue),e("button",{onClick:L},u(k.value),1)]),e("div",ie,[t[14]||(t[14]=e("label",null,"Network",-1)),e("input",{type:"text",value:d.value.networkName,readonly:""},null,8,de)]),d.value.destinationTagRequired?(o(),l("div",ce,[t[15]||(t[15]=e("label",null,"Destination Tag",-1)),e("input",{type:"text",value:d.value.tag,readonly:""},null,8,me)])):C("",!0),e("small",ve,[t[16]||(t[16]=h("Please send only ",-1)),e("strong",pe,u(d.value.symbol),1),t[17]||(t[17]=h(" to this address. Sending any other coins may result in permanent loss.",-1))]),t[20]||(t[20]=e("p",{class:"crypto-notice"}," After payment, send your transaction hash/ID and your Nexus Academy email to our support team for verification. Access will be granted after manual confirmation. ",-1))])):C("",!0)])):(o(),l("div",J,[t[6]||(t[6]=e("h2",null,"Choose Your Payment Method",-1)),e("div",{class:"payment-option",onClick:m},t[3]||(t[3]=[e("h3",null,"Pay with Card / Bank",-1),e("p",null,"Securely pay with your card or bank account via Paystack.",-1)])),e("div",{class:"payment-option",onClick:q},t[4]||(t[4]=[e("h3",null,"Pay with Crypto",-1),e("p",null," Pay with Bitcoin, USDT, or other cryptos. Manual confirmation required. ",-1)])),e("div",{class:"payment-option simulated",onClick:g},t[5]||(t[5]=[e("h3",null,"Simulated Enrollment (Dev Only)",-1),e("p",null,"Instantly enroll for testing purposes.",-1)]))]))])]))}},be=$(ye,[["__scopeId","data-v-87fbc172"]]),we={class:"course-detail-wrapper"},fe={key:0,class:"page-loader-container"},ke={key:1,class:"container error-message"},ge={key:2},he={class:"container course-hero"},Ce={class:"course-category"},Be={class:"course-subtitle"},Ae={class:"container course-layout"},Pe={class:"course-main-content"},xe={class:"content-section"},Se={class:"learning-objectives-list"},Ee={class:"content-section"},Ne={class:"curriculum-accordion"},_e={class:"lesson-list"},De={class:"course-sidebar"},Te={class:"course-sidebar-card"},Re=["src","alt"],$e={class:"course-price"},Ie={class:"key-features-list"},Me={__name:"CourseDetailView",setup(S){const E=W(),f=M(),P=c(E.params.id),n=c(null),p=c(!0),k=c(null),y=c(!1),b=(a,s="NGN")=>typeof a!="number"?"N/A":new Intl.NumberFormat("en-NG",{style:"currency",currency:s}).format(a/100),w=()=>{_.currentUser?y.value=!0:(sessionStorage.setItem("redirectAfterLogin",`/course/${P.value}`),f.push("/signup"))},d=a=>{a.currentTarget.parentElement.classList.toggle("is-open")};return U(async()=>{try{p.value=!0;const a=await j(P.value);if(a)n.value=a;else throw new Error("Course not found")}catch(a){console.error("Failed to load course details:",a),k.value=a}finally{p.value=!1}}),(a,s)=>(o(),l("div",we,[p.value?(o(),l("div",fe,s[1]||(s[1]=[e("div",{class:"spinner"},null,-1)]))):k.value?(o(),l("div",ke,[s[3]||(s[3]=e("h1",null,"Course Not Found",-1)),s[4]||(s[4]=e("p",null," We couldn't find the course you were looking for. It may have been moved or deleted. ",-1)),O(I(G),{to:"/courses",class:"btn btn-secondary"},{default:Q(()=>s[2]||(s[2]=[h("← Back to All Courses",-1)])),_:1,__:[2]})])):n.value?(o(),l("main",ge,[e("header",he,[e("p",Ce,u(n.value.category),1),e("h1",null,u(n.value.title),1),e("p",Be,u(n.value.description),1)]),e("div",Ae,[e("div",Pe,[e("div",xe,[s[5]||(s[5]=e("h2",null,"What You'll Learn",-1)),e("ul",Se,[(o(!0),l(B,null,A(n.value.learningObjectives,(m,g)=>(o(),l("li",{key:g}," ✓ "+u(m),1))),128))])]),e("div",Ee,[s[8]||(s[8]=e("h2",null,"Course Curriculum",-1)),e("div",Ne,[(o(!0),l(B,null,A(n.value.modules,m=>(o(),l("div",{key:m.title,class:"curriculum-module"},[e("div",{class:"module-header",onClick:d},[e("h3",null,u(m.title),1),s[6]||(s[6]=e("svg",{class:"module-toggle-icon",viewBox:"0 0 24 24"},[e("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"})],-1))]),e("ul",_e,[(o(!0),l(B,null,A(m.lessons,g=>(o(),l("li",{key:g.id,class:"lesson-item"},[s[7]||(s[7]=e("span",{class:"lesson-icon"},"●",-1)),h(" "+u(g.title),1)]))),128))])]))),128))])])]),e("aside",De,[e("div",Te,[e("img",{src:n.value.imageUrl,alt:n.value.title,class:"course-card-image"},null,8,Re),e("div",$e,u(b(n.value.price,n.value.currency)),1),e("button",{onClick:w,class:"btn btn-primary"}," Enroll Now "),e("ul",Ie,[e("li",null,[s[9]||(s[9]=e("svg",{viewBox:"0 0 24 24"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),e("span",null,u(n.value.level)+" Level",1)]),e("li",null,[s[10]||(s[10]=e("svg",{viewBox:"0 0 24 24"},[e("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),e("span",null,u(n.value.estimatedDuration),1)]),s[11]||(s[11]=e("li",null,[e("svg",{viewBox:"0 0 24 24"},[e("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]),e("span",null,"Self-Paced Learning")],-1))])])])])])):C("",!0),y.value?(o(),Y(be,{key:3,course:n.value,onClose:s[0]||(s[0]=m=>y.value=!1)},null,8,["course"])):C("",!0)]))}},ze=$(Me,[["__scopeId","data-v-f2571f45"]]);export{ze as default};
